# macOS用のセキュリティ設定（Touch ID in tmux）
# set -g default-command "reattach-to-user-namespace -l $SHELL"
set -s escape-time 0

set-option -g prefix C-t
unbind-key C-b
bind-key C-t send-prefix

unbind-key z
bind-key t resize-pane -Z

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

bind-key R source-file ~/.tmux.conf \; display-message "Config reloaded!"

bind-key -r C-h resize-pane -L 5
bind-key -r C-j resize-pane -D 5
bind-key -r C-k resize-pane -U 5
bind-key -r C-l resize-pane -R 5

bind-key a set-window-option synchronize-panes on
bind-key A set-window-option synchronize-panes off

set-window-option -g mode-keys vi

set-option -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

unbind-key -T root DoubleClick1Pane
unbind-key -T root TripleClick1Pane
unbind-key -T copy-mode DoubleClick1Pane
unbind-key -T copy-mode TripleClick1Pane
unbind-key -T copy-mode-vi DoubleClick1Pane
unbind-key -T copy-mode-vi TripleClick1Pane

bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle

set-option -g base-index 1
set-window-option -g pane-base-index 1
set-option -g history-limit 10000
set-option -g default-terminal "screen-256color"
set-option -g status on
set-option -g status-interval 5
set-option -g status-justify centre
set-option -g set-titles on
set-option -g set-titles-string "[tmux]#T \"#W\"(#I/#P)"

set-option -g automatic-rename on
set-option -g allow-rename off
set-option -g automatic-rename-format '#{pane_current_command} · #{b:pane_current_path}'

set -g pane-border-status top

set -g status-style fg=#c0caf5,bg=#1f2335
set -g message-style fg=#1f2335,bg=#7aa2f7
set -g message-command-style fg=#1f2335,bg=#7aa2f7
set -g pane-border-style fg=#434c6c
set -g pane-active-border-style fg=#7aa2f7,bold
set -g pane-border-lines double

set -g status-left-length 80
set -g status-left "#[fg=#1f2335,bg=#7aa2f7,bold] TMUX #[fg=#7aa2f7,bg=#394b70]#[fg=#c0caf5,bg=#394b70] #S #[fg=#394b70,bg=#1f2335]#[fg=#7aa2f7] #h #[default]"

set -g status-right-length 60
set -g status-right "#[fg=#1f2335,bg=#9ece6a,bold] %Y-%m-%d %H:%M #[default]"

set-option -g window-status-separator ""
set-option -g window-status-format "#[fg=#565f89,bg=#1f2335] #I #[fg=#a9b1d6]#W #{?window_flags,#[fg=#f7768e]#{window_flags}, }#[default]"
set-option -g window-status-current-format "#[fg=#1f2335,bg=#7aa2f7,bold] #I #[fg=#1f2335,bg=#7aa2f7,bold]#W #{?window_flags,#[fg=#1f2335,bg=#7aa2f7]#{window_flags},}#[fg=#7aa2f7,bg=#1f2335]#[default]"

set -g pane-border-format '#[fg=#a9b1d6]#{?pane_active,#[fg=#7aa2f7]#[bold],} #P #{pane_current_command} #[fg=#565f89]#{b:pane_current_path} #[default]'

set-option -ga terminal-features "*:hyperlinks"
set-option -ga terminal-overrides "*:Hls=\E]8;id=%p1%s;%p2%s\E\:Hlr=\E]8;;\E\\"
set-option -g allow-passthrough on

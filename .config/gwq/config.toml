# gwq configuration
# ghq + gwq + direnv の黄金構成
# - ghqと同じrootを使用することで、worktreeもghqのディレクトリ構造に統合
# - direnvのOwnerレベル.envrcがghqリポジトリ/worktree両方に適用される

[worktree]
# ghqのrootと同じディレクトリを指定
# ~/src/github.com/owner/repo        ← ghqで管理
# ~/src/github.com/owner/repo-branch ← gwqでworktree作成
basedir = "~/src"
auto_mkdir = true

[naming]
# ghq風のディレクトリ構造 + ブランチ名サフィックス
# 例: github.com/monocorp-jp/monocorp.jp-feature-auth
template = "{{.Host}}/{{.Owner}}/{{.Repository}}-{{.Branch}}"

# ブランチ名に含まれるパス区切り文字を安全な文字に置換
# feature/auth → feature-auth
[naming.sanitize_chars]
"/" = "-"
":" = "-"

[finder]
preview = true

[ui]
icons = true
tilde_home = true

[tmux]
enabled = true

# Claude Code integration
[claude]
config_dir = "~/.config/gwq/claude"
executable = "claude"
max_development_tasks = 2
max_parallel = 3

[claude.execution]
auto_cleanup = true

[claude.queue]
queue_dir = "~/.config/gwq/claude/queue"

[claude.worktree]
auto_create_worktree = true
require_existing_worktree = false
validate_branch_exists = true

# Default settings for all repositories
[[repository_settings]]
repository = "*"  # Wildcard for all repos
copy_files = []  # No files to copy - direnv inherits .envrc from parent (Owner level)
setup_commands = ["npm install || pnpm install || yarn install || true"]

# Specific project example (uncomment and customize as needed)
# [[repository_settings]]
# repository = "~/src/github.com/owner/myproject"
# copy_files = [".env", ".env.local"]
# setup_commands = ["pnpm install"]
